ngx_addon_name=ngx_ether_lib

ngx_feature="htonll and ntohll"
ngx_feature_libs=
ngx_feature_name="NGX_ETHER_HAVE_HTONLL"
ngx_feature_run=no
ngx_feature_incs="#include <netinet/in.h>"
ngx_feature_path=
ngx_feature_test='htonll(0); ntohll(0);'

. auto/feature

EVENT_MODULES="$EVENT_MODULES ngx_event_ether_lua_module"
HTTP_MODULES="$HTTP_MODULES ngx_http_ether_lua_module"

if [ -n "$ngx_module_link" ]; then
	# nginx-1.9.11+
	ngx_module_type=CORE
	ngx_module_name=ngx_ether_module
	ngx_module_incs="$ngx_addon_dir/api $ngx_addon_dir"
	ngx_module_deps="$ngx_addon_dir/api/ngx_ether.h $ngx_addon_dir/ngx_ether_module.h"
	ngx_module_srcs="$ngx_addon_dir/ngx_ether_module.c $ngx_addon_dir/ngx_ether_lua_module.c"
	ngx_module_libs=

	. auto/module
else
	CORE_MODULES="$CORE_MODULES ngx_ether_module"
	NGX_ADDON_DEPS="$NGX_ADDON_DEPS $ngx_addon_dir/api/ngx_ether.h $ngx_addon_dir/ngx_ether_module.h"
	NGX_ADDON_SRCS="$NGX_ADDON_SRCS $ngx_addon_dir/ngx_ether_module.c $ngx_addon_dir/ngx_ether_lua_module.c"
fi

CORE_INCS="$CORE_INCS $ngx_addon_dir/api"

# -*- mode: shell;-*-
